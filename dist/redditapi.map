{"version":3,"sources":["redditapi.js","index.js"],"names":["search","searchTerm","searchLimit","sortBy","fetch","then","res","json","data","children","map","catch","console","log","err","searchForm","document","getElementById","searchInput","addEventListener","value","querySelector","showMessage","results","output","forEach","image","post","preview","images","source","url","title","truncateString","selftext","subreddit","score","innerHTML","e","preventDefault","message","className","div","createElement","appendChild","createTextNode","searchContainer","insertBefore","setTimeout","remove","myString","limit","shortened","indexOf","substring"],"mappings":"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","file":"redditapi.map","sourcesContent":["export default {\n search: function(searchTerm, searchLimit, sortBy) {\n        return fetch(\n              `http://www.reddit.com/search.json?q=${searchTerm}&sort=${sortBy}&limit=${searchLimit}`\n           )\n              .then(res => res.json())\n          .then(data => {\n            return data.data.children.map(data => data.data);\n          })\n          .catch(err => console.log(err));\n      }\n};","import reddit from './redditapi';\n\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\n\n//Form Event Listener\n\n\nsearchForm.addEventListener('submit', e => {\n\n    //Get search term\n    const searchTerm = searchInput.value;\n\n    //Get Sort\n    const sortBy = document.querySelector('input[name=\"sortby\"]:checked').value;\n\n\n    //Get Limit\n    const searchLimit = document.getElementById('limit').value;\n\n    //Check input\n    if (searchTerm == ''){\n        //show message\n        showMessage('Please add a Search Term','alert-danger');\n    }\n\n    //Clear input\n    searchInput.value = '';\n\n    //SEARCH REDDIT\n   reddit.search(searchTerm, searchLimit, sortBy)\n       .then(results => {\n           console.log(results);\n         let output = '<div class=\"card-columns\">';\n         //loop through posts\n         results.forEach(post => {\n\n             //check for images\n             const image = post.preview ? post.preview.images[0]\n                 .source.url : 'https://cdn.comparitech.com/wp-content/uploads/2017/08/reddit-1.jpg';\n           output += `\n             <div class=\"card\">\n                 <img class=\"card-img-top\" src=\"${image}\" alt=\"Card image cap\">\n                 <div class=\"card-body\">\n                   <h5 class=\"card-title\">${post.title}</h5>\n                   <p class=\"card-text\">${truncateString(post.selftext, 100)}</p>\n                   <a href=\"${post.url}\" target=\"_blank\" class=\"btn btn-primary\">Read More</a>\n                   <hr>\n                   <span class=\"badge badge-secondary\">Subreddit: ${post.subreddit}</span>\n                   <span class=\"badge badge-dark\">Score: ${post.score}</span>\n                 </div>\n            </div>\n           `;\n         });\n\n         output += '</div>';\n         document.getElementById('results').innerHTML = output;\n\n   });\n\n    e.preventDefault();\n});\n\n//Show Alert message\n function showMessage(message,className) {\n     //create div\n     const div = document.createElement('div');\n     //add classes\n     div.className = `alert ${className}`;\n     //add text\n     div.appendChild(document.createTextNode(message));\n     //get parent\n     const searchContainer = document.getElementById('search-container');\n     //Get Search\n     const search = document.getElementById('search');\n\n     //Insert Message\n     searchContainer.insertBefore(div, search);\n\n     //Alert Timeout\n     setTimeout(() => document.querySelector('.alert').remove(), 3000);\n }\n\n //Truncate or Shorten Text\nfunction truncateString(myString, limit) {\n    const shortened = myString.indexOf(' ', limit);\n    if (shortened == -1) return myString;\n    return myString.substring(0, shortened);\n}"]}